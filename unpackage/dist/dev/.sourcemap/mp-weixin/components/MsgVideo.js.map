{"version":3,"file":"MsgVideo.js","sources":["components/MsgVideo.vue","/Users/orange/aicode/langbot/web_client/langbot-im-uniapp/components/MsgVideo.vue?type=component"],"sourcesContent":["<template>\n\t<view :class=\"['media-bubble', from === 'me' ? 'from-me' : 'from-bot']\">\n\t\t<view class=\"video-body\">\n\t\t\t<view v-if=\"video?.title\" class=\"video-title\">{{ video.title }}</view>\n\t\t\t<video\n\t\t\t\tclass=\"video-player\"\n\t\t\t\t:src=\"source\"\n\t\t\t\t:poster=\"video?.cover_url || ''\"\n\t\t\t\t:controls=\"true\"\n\t\t\t\t:loop=\"false\"\n\t\t\t\t@error=\"handleError\"\n\t\t\t></video>\n\t\t\t<view class=\"video-meta\">\n\t\t\t\t<text v-if=\"durationLabel\" class=\"meta-item\">时长 {{ durationLabel }}</text>\n\t\t\t\t<text v-if=\"sizeLabel\" class=\"meta-item\">大小 {{ sizeLabel }}</text>\n\t\t\t\t<slot name=\"footer\"></slot>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps({\n\tvideo: {\n\t\ttype: Object,\n\t\tdefault: () => ({})\n\t},\n\tfrom: {\n\t\ttype: String,\n\t\tdefault: 'bot'\n\t}\n})\n\nconst emit = defineEmits(['error'])\n\nconst source = computed(() => props.video?.url || '')\n\nconst durationLabel = computed(() => {\n\tconst duration = props.video?.duration\n\tif (!duration && duration !== 0) return ''\n\tconst seconds = Math.round(duration)\n\tconst mm = Math.floor(seconds / 60)\n\tconst ss = seconds % 60\n\treturn `${mm}:${ss.toString().padStart(2, '0')}`\n})\n\nconst sizeLabel = computed(() => {\n\tconst size = props.video?.size\n\tif (!size) return ''\n\tconst units = ['B', 'KB', 'MB', 'GB']\n\tlet value = size\n\tlet idx = 0\n\twhile (value > 1024 && idx < units.length - 1) {\n\t\tvalue /= 1024\n\t\tidx += 1\n\t}\n\treturn `${value.toFixed(1)} ${units[idx]}`\n})\n\nfunction handleError(event) {\n\tconsole.warn('[MsgVideo] play failed', event?.detail || event)\n\temit('error', event)\n}\n</script>\n\n<style scoped>\n.media-bubble {\n\tmax-width: 80%;\n\tmargin: 8px 0;\n\tdisplay: flex;\n}\n\n.media-bubble.from-me {\n\tjustify-content: flex-end;\n}\n\n.media-bubble.from-bot {\n\tjustify-content: flex-start;\n}\n\n.video-body {\n\twidth: 460rpx;\n\tmax-width: 560rpx;\n\tpadding: 16rpx;\n\tborder-radius: 16rpx;\n\tbackground-color: #ffffff;\n\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 12rpx;\n}\n\n.from-me .video-body {\n\tbackground-color: #4b7bec;\n\tcolor: #ffffff;\n}\n\n.video-title {\n\tfont-weight: 600;\n\tfont-size: 28rpx;\n}\n\n.video-player {\n\twidth: 100%;\n\theight: 320rpx;\n\tborder-radius: 12rpx;\n\tbackground-color: #000;\n}\n\n.video-meta {\n\tdisplay: flex;\n\tgap: 16rpx;\n\tfont-size: 24rpx;\n\topacity: 0.85;\n}\n\n.meta-item {\n\twhite-space: nowrap;\n}\n</style>\n","import Component from '/Users/orange/aicode/langbot/web_client/langbot-im-uniapp/components/MsgVideo.vue'\nwx.createComponent(Component)"],"names":["computed","uni"],"mappings":";;;;;;;;;;;;;;;;AAwBA,UAAM,QAAQ;AAWd,UAAM,OAAO;AAEb,UAAM,SAASA,cAAQ,SAAC,MAAM;;AAAA,0BAAM,UAAN,mBAAa,QAAO;AAAA,KAAE;AAEpD,UAAM,gBAAgBA,cAAQ,SAAC,MAAM;;AACpC,YAAM,YAAW,WAAM,UAAN,mBAAa;AAC9B,UAAI,CAAC,YAAY,aAAa;AAAG,eAAO;AACxC,YAAM,UAAU,KAAK,MAAM,QAAQ;AACnC,YAAM,KAAK,KAAK,MAAM,UAAU,EAAE;AAClC,YAAM,KAAK,UAAU;AACrB,aAAO,GAAG,EAAE,IAAI,GAAG,SAAU,EAAC,SAAS,GAAG,GAAG,CAAC;AAAA,IAC/C,CAAC;AAED,UAAM,YAAYA,cAAQ,SAAC,MAAM;;AAChC,YAAM,QAAO,WAAM,UAAN,mBAAa;AAC1B,UAAI,CAAC;AAAM,eAAO;AAClB,YAAM,QAAQ,CAAC,KAAK,MAAM,MAAM,IAAI;AACpC,UAAI,QAAQ;AACZ,UAAI,MAAM;AACV,aAAO,QAAQ,QAAQ,MAAM,MAAM,SAAS,GAAG;AAC9C,iBAAS;AACT,eAAO;AAAA,MACP;AACD,aAAO,GAAG,MAAM,QAAQ,CAAC,CAAC,IAAI,MAAM,GAAG,CAAC;AAAA,IACzC,CAAC;AAED,aAAS,YAAY,OAAO;AAC3BC,oBAAA,MAAA,MAAA,QAAA,iCAAa,2BAA0B,+BAAO,WAAU,KAAK;AAC7D,WAAK,SAAS,KAAK;AAAA,IACpB;;;;;;;;;;;;;;;;;;;;;;;;;AC/DA,GAAG,gBAAgB,SAAS;"}