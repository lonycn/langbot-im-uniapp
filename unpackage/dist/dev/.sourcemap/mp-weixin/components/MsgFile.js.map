{"version":3,"file":"MsgFile.js","sources":["components/MsgFile.vue","/Users/orange/aicode/langbot/web_client/langbot-im-uniapp/components/MsgFile.vue?type=component"],"sourcesContent":["<template>\n\t<view :class=\"['file-bubble', from === 'me' ? 'from-me' : 'from-bot']\">\n\t\t<view class=\"file-body\">\n\t\t\t<view class=\"file-info\">\n\t\t\t\t<view class=\"file-icon\">ðŸ“„</view>\n\t\t\t\t<view class=\"file-text\">\n\t\t\t\t\t<text class=\"file-name\" :title=\"fileName\">{{ fileName }}</text>\n\t\t\t\t\t<text class=\"file-meta\">{{ sizeLabel }} Â· {{ mimeLabel }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<button class=\"file-action\" size=\"mini\" type=\"primary\" @click=\"openFile\">æŸ¥çœ‹ / ä¸‹è½½</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps({\n\tfile: {\n\t\ttype: Object,\n\t\tdefault: () => ({})\n\t},\n\tfrom: {\n\t\ttype: String,\n\t\tdefault: 'bot'\n\t}\n})\n\nconst emit = defineEmits(['open'])\n\nconst fileName = computed(() => props.file?.name || 'é™„ä»¶')\nconst fileUrl = computed(() => props.file?.url || '')\n\nconst sizeLabel = computed(() => {\n\tconst size = props.file?.size\n\tif (!size) return 'æœªçŸ¥å¤§å°'\n\tconst units = ['B', 'KB', 'MB', 'GB']\n\tlet value = size\n\tlet idx = 0\n\twhile (value > 1024 && idx < units.length - 1) {\n\t\tvalue /= 1024\n\t\tidx += 1\n\t}\n\treturn `${value.toFixed(1)} ${units[idx]}`\n})\n\nconst mimeLabel = computed(() => props.file?.mime || 'æœªçŸ¥ç±»åž‹')\n\nfunction openFile() {\n\tif (!fileUrl.value) return\n\temit('open', props.file)\n\t/* #ifdef H5 */\n\twindow.open(fileUrl.value, '_blank')\n\t/* #endif */\n\t/* #ifndef H5 */\n\tuni.openDocument({\n\t\tfilePath: fileUrl.value,\n\t\tshowMenu: true,\n\t\tfail(err) {\n\t\t\tconsole.warn('[MsgFile] open document failed', err)\n\t\t\tuni.showToast({ title: 'æ— æ³•æ‰“å¼€é™„ä»¶', icon: 'none' })\n\t\t}\n\t})\n\t/* #endif */\n}\n</script>\n\n<style scoped>\n.file-bubble {\n\tmax-width: 80%;\n\tmargin: 8px 0;\n\tdisplay: flex;\n}\n\n.file-bubble.from-me {\n\tjustify-content: flex-end;\n}\n\n.file-bubble.from-bot {\n\tjustify-content: flex-start;\n}\n\n.file-body {\n\tpadding: 18rpx 22rpx;\n\tborder-radius: 16rpx;\n\tbackground-color: #ffffff;\n\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 16rpx;\n}\n\n.from-me .file-body {\n\tbackground-color: #4b7bec;\n\tcolor: #ffffff;\n}\n\n.file-info {\n\tdisplay: flex;\n\tgap: 16rpx;\n\talign-items: center;\n}\n\n.file-icon {\n\tfont-size: 42rpx;\n}\n\n.file-text {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 6rpx;\n}\n\n.file-name {\n\tfont-weight: 600;\n\tfont-size: 28rpx;\n\tmax-width: 400rpx;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.file-meta {\n\tfont-size: 24rpx;\n\topacity: 0.8;\n}\n\n.file-action {\n\talign-self: flex-start;\n}\n</style>\n","import Component from '/Users/orange/aicode/langbot/web_client/langbot-im-uniapp/components/MsgFile.vue'\nwx.createComponent(Component)"],"names":["computed","uni"],"mappings":";;;;;;;;;;;;;;;;AAkBA,UAAM,QAAQ;AAWd,UAAM,OAAO;AAEb,UAAM,WAAWA,cAAQ,SAAC,MAAM;;AAAA,0BAAM,SAAN,mBAAY,SAAQ;AAAA,KAAI;AACxD,UAAM,UAAUA,cAAQ,SAAC,MAAM;;AAAA,0BAAM,SAAN,mBAAY,QAAO;AAAA,KAAE;AAEpD,UAAM,YAAYA,cAAQ,SAAC,MAAM;;AAChC,YAAM,QAAO,WAAM,SAAN,mBAAY;AACzB,UAAI,CAAC;AAAM,eAAO;AAClB,YAAM,QAAQ,CAAC,KAAK,MAAM,MAAM,IAAI;AACpC,UAAI,QAAQ;AACZ,UAAI,MAAM;AACV,aAAO,QAAQ,QAAQ,MAAM,MAAM,SAAS,GAAG;AAC9C,iBAAS;AACT,eAAO;AAAA,MACP;AACD,aAAO,GAAG,MAAM,QAAQ,CAAC,CAAC,IAAI,MAAM,GAAG,CAAC;AAAA,IACzC,CAAC;AAED,UAAM,YAAYA,cAAQ,SAAC,MAAM;;AAAA,0BAAM,SAAN,mBAAY,SAAQ;AAAA,KAAM;AAE3D,aAAS,WAAW;AACnB,UAAI,CAAC,QAAQ;AAAO;AACpB,WAAK,QAAQ,MAAM,IAAI;AAKvBC,oBAAAA,MAAI,aAAa;AAAA,QAChB,UAAU,QAAQ;AAAA,QAClB,UAAU;AAAA,QACV,KAAK,KAAK;AACTA,wBAAAA,MAAA,MAAA,QAAA,gCAAa,kCAAkC,GAAG;AAClDA,wBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAAA,QAC/C;AAAA,MACH,CAAE;AAAA,IAEF;;;;;;;;;;;;;;AChEA,GAAG,gBAAgB,SAAS;"}