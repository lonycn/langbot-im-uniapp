{"version":3,"file":"info.js","sources":["uni_modules/uni-im/pages/group/info.vue","uni_modules/uni-im/pages/group/info.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"group-info-box\" v-if=\"conversation_id\">\n    <uni-im-group-members :conversation_id=\"conversation_id\"></uni-im-group-members>\n    <uni-list>\n      <uni-list-item v-if=\"!leave_group && !isTmpGroup\" title=\"消息免打扰\" @switchChange=\"changeConversationMute\"\n        :switchChecked=\"conversation.mute\" :showSwitch=\"true\" switchColor=\"#22b832\"></uni-list-item>\n      <uni-list-item v-for=\"(val,key) in editorFields\" :key=\"key\" @click.native=\"openPopupInfo(key)\" :title=\"val\"\n        :showArrow=\"isAdmin\" :clickable=\"isAdmin\">\n        <template v-slot:footer>\n          <text class=\"group-info-text\">{{conversation.group[key]}}</text>\n        </template>\n      </uni-list-item>\n\t\t\t<uni-list-item @click.native=\"setGroupNotice\" title=\"群公告\" link></uni-list-item>\n      <uni-list-item @click.native=\"setAvatar\" title=\"群头像\" :clickable=\"isAdmin\">\n        <template v-slot:footer>\n          <uni-im-img width=\"50px\" height=\"50px\" :src=\"logoUrl||'/uni_modules/uni-im/static/avatarUrl.png'\" mode=\"\"></uni-im-img>\n        </template>\n      </uni-list-item>\n      <template v-if=\"isAdmin\">\n        <uni-list-item @click.native=\"setAddGroupType\" title=\"加群方式\" note=\"申请加入本群的验证规则\" :clickable=\"isAdmin\">\n          <template v-slot:footer>\n            <text class=\"join_option\">{{join_option}}</text>\n          </template>\n        </uni-list-item>\n        <uni-list-item title=\"全员禁言\" @switchChange=\"setMuteAllMembers\"\n          :switchChecked=\"conversation.group.mute_all_members\" :showSwitch=\"true\"></uni-list-item>\n      </template>\n      <!-- #ifdef H5 -->\n      <uni-list-item v-if=\"!isTmpGroup\" @click=\"share\" :clickable=\"true\" title=\"分享此群\">\n        <template v-slot:footer>\n          <uni-icons size=\"25px\" color=\"#666\" type=\"redo\"></uni-icons>\n        </template>\n      </uni-list-item>\n      <!-- #endif -->\n    </uni-list>\n    <view v-if=\"leave_group\">\n      <text style=\"padding: 15px;text-align: center;color: #666;\">- 你不是此群成员 -</text>\n      <!-- <text @click=\"joinGroup\" style=\"padding: 15px;text-align: center;color: #005eca;cursor: pointer;\">申请加入</text> -->\n    </view>\n    <text v-else-if=\"isTmpGroup\" style=\"padding: 15px;text-align: center;color: #666;\">- 临时群聊 -</text>\n    <text v-else-if=\"isBissnessGroup\" style=\"padding: 15px;text-align: center;color: #666;\">- 业务群 -</text>\n    <text v-else class=\"exitGroup\" @click=\"exitGroup\">{{isGroupCreator?'解散群聊':'退出群聊'}}</text>\n    <uni-popup ref=\"popupInfo\" type=\"dialog\">\n      <uni-popup-dialog mode=\"input\" :title=\"editorFields[editorType]\" :placeholder=\"'请输入'+editorFields[editorType]\"\n        :duration=\"2000\" :before-close=\"true\" :value=\"editorDefaultValue\" @close=\"closePopupInfo\" :maxlength=\"500\"\n        @confirm=\"confirmPopupInfo\"></uni-popup-dialog>\n    </uni-popup>\n    <!-- #ifdef H5 -->\n    <uni-popup v-if=\"isWidescreen\" ref=\"popup-qr-code\" type=\"center\">\n      <qrCodePage ref=\"popup-qr-code-page\"></qrCodePage>\n    </uni-popup>\n\t\t\n\t\t<uni-popup v-if=\"isWidescreen\" ref=\"popup-notice-list\" type=\"center\">\n\t\t\t<notice-list @close=\"$refs['popup-notice-list'].close()\" class=\"notice-list\" ref=\"noticeList\"></notice-list>\n\t\t</uni-popup>\n    <!-- #endif -->\n\t\t\n  </view>\n</template>\n\n<script>\n  const db = uniCloud.database()\n  import uniIm from '@/uni_modules/uni-im/sdk/index.js';\n  import members from '@/uni_modules/uni-im/pages/group/members';\n\timport noticeList from '@/uni_modules/uni-im/pages/group/notice/list.vue';\n  // #ifdef H5\n  import qrCodePage from './qrCode.vue'\n  // #endif\n  export default {\n    components: {\n      'uni-im-group-members':members,\n      // #ifdef H5\n      qrCodePage,\n\t\t\tnoticeList\n      // #endif\n    },\n    data() {\n      return {\n        conversation: {\n          group: {\n            user_id: \"\",\n            mute_all_members: false,\n            member: {\n              dataList: [],\n              count:() => 0\n            },\n          },\n          mute: false\n        },\n        leave_group: false,\n        editorFields: {\n          \"name\": \" 群聊名称\",\n          \"introduction\": \"群简介\"\n        },\n        editorType: '',\n        editorDefaultValue: '',\n        groupType: '',\n        isAdmin: false,\n        keyword: '',\n        mute_all_members: false,\n        showAllMember: false,\n        conversation_id:'',\n        // 鼠标在哪个用户id上\n        hoverUserId: ''\n      };\n    },\n    computed: {\n      ...uniIm.mapState(['isWidescreen']),\n      currentUid() {\n        return uniIm.currentUser._id\n      },\n      logoUrl() {\n        return this.conversation.group.avatar_file ? this.conversation.group.avatar_file.url : false\n      },\n      join_option() {\n        let val = this.conversation.group.join_option\n        return {\n          needPermission: \"需要验证权限\",\n          freeAccess: \"自由加入\",\n          disableApply: \"禁止加入\"\n        } [val]\n      },\n      isGroupCreator() {\n        return this.conversation.group.user_id == this.currentUid\n      },\n      canPrivateChat(){\n        // 当前登录的账号是管理员，或者当前消息是群管理员发的\n        return this.uniIDHasRole('staff') || this.hoverUserId && this.conversation.group.member.find(this.hoverUserId).role.includes('admin')\n      },\n      isTmpGroup(){\n        return this.conversation?.id?.indexOf('__tmp') === 0\n      },\n      isBissnessGroup(){\n        return this.conversation.group?.ext?.business_group_code\n      }\n    },\n    watch: {\n      \"conversation.group.member_count\"(){\n        this.updateNavTitle()\n      },\n      // （后续）通过监听实现实时切换管理员实时刷新权限\n      // console.log('isAdmin',isAdmin);\n      conversation: {\n        handler(conversation, oldValue) {\n          // 当前用户是群的创建者或者管理员（在群成员中找到当前用户的角色包含admin）\n          this.isAdmin = this.isGroupCreator || this.conversation.group.member.find(this.currentUid)?.role.includes('admin')\n          this.leave_group = conversation.leave\n          this.mute_all_members = conversation.group.mute_all_members\n        },\n        deep: true\n      },\n    },\n    async onLoad(e) {\n      if (!e.conversation_id) {\n        throw new Error(\"会话id不能为空\")\n      }\n      this.load(e.conversation_id)\n    },\n    onShow() {\n      // console.log(\"this.conversation: \", this.conversation.group.member);\n      this.updateNavTitle()\n    },\n    methods: {\n      updateNavTitle(){\n        const {group:{member_count},title} = this.conversation\n        if (!uniIm.isWidescreen && typeof member_count == 'number') { // pc宽屏不需要\n          const newTitle = title + \"（\" + member_count + \"人）-  群信息\"\n          uni.setNavigationBarTitle({\"title\":newTitle});\n        }\n      },\n      navToMembers(conversation_id){\n        uni.navigateTo({\n          url:\"/uni_modules/uni-im/pages/group/members?conversation_id=\" + conversation_id\n        })\n      },\n      async load(conversation_id) {\n        this.conversation_id = conversation_id\n        this.conversation = await uniIm.conversation.get(conversation_id)\n      },\n      async exitGroup() {\n        const group_id = this.conversation.group._id\n        if (this.isGroupCreator) {\n          uni.showModal({\n            title: '确认要解散群聊吗？',\n            content: '不能撤销，请谨慎操作',\n            cancelText: '取消',\n            confirmText: '确认',\n            complete: async (e) => {\n              // console.log(e);\n              if (e.confirm) {\n                uni.showLoading({\n                  mask: true\n                });\n                let res = await db.collection('uni-im-group')\n                  .where({\n                    _id: group_id\n                  })\n                  .remove()\n                  .finally((res) => {\n                    // uni.navigateBack({ // 收到离群的推送通知会自动关闭当前页面\n                    // \tdelta: 2\n                    // })\n                    uni.hideLoading()\n                  })\n                // console.log('exitGroup', res);\n              }\n            }\n          });\n        } else {\n          uni.showModal({\n            title: '确认退出当前群聊？',\n            content: `退出后聊天记录将会被清空，此操作无法撤销，请谨慎操作。`,\n            cancelText: '取消',\n            confirmText: '确认',\n            complete: async (e) => {\n              // console.log(e);\n              if (e.confirm) {\n                // uni.navigateBack({ // 收到离群的推送通知会自动关闭当前页面\n                // \tdelta: 2\n                // })\n                uni.showLoading({\n                  mask: true\n                });\n                let res = await db.collection('uni-im-group-member').where({\n                    user_id: this.currentUid,\n                    group_id\n                  })\n                  .remove()\n                // console.log(res.result);\n                if (res.result.deleted) {\n                  uni.showToast({\n                    title: '成功退出',\n                    icon: 'none'\n                  });\n                  uniIm.conversation.remove(this.conversation_id)\n                }\n                uni.hideLoading()\n                // console.log('exitGroup', res);\n              }\n            }\n          });\n        }\n      },\n      openPopupInfo(type) {\n        // console.log(type);\n        if (!this.isAdmin) return\n        this.editorType = type\n        this.editorDefaultValue = this.conversation.group[type]\n        if (this.editorType == \"notification\") {\n          this.editorDefaultValue = this.editorDefaultValue?.content || \"\"\n        }\n        this.$refs.popupInfo.open()\n      },\n      closePopupInfo() {\n        this.$refs.popupInfo.close()\n      },\n      confirmPopupInfo(value) {\n        value = value.trim()\n        if (!value) {\n          uni.showToast({\n            title: '内容不能为空！',\n            icon: 'none'\n          });\n          return\n        }\n        if (value.length < 5) {\n          uni.showToast({\n            title: '内容长度不能低于5',\n            icon: 'none'\n          });\n          return\n        }\n        // console.log('value', value);\n        const updateData = {};\n        if (this.editorType == 'notification') {\n          updateData[this.editorType] = {\n            \"content\": value\n          }; // 创建时间服务端生成\n        } else {\n          updateData[this.editorType] = value;\n        }\n        this.updateGroupInfo(updateData)\n        this.$refs.popupInfo.close()\n      },\n      setAddGroupType() {\n        if (!this.isAdmin) return\n        uni.showActionSheet({\n          itemList: ['自由加入', '需要验证权限', '禁止加入'],\n          success: (e) => {\n            let join_option = ['freeAccess', 'needPermission', 'disableApply'][e.tapIndex]\n            this.updateGroupInfo({\n              join_option\n            })\n          },\n          fail: (err) => {\n            console.error(\"err: \", err);\n          }\n        })\n      },\n      async updateGroupInfo(group) {\n        // console.log('group---------',group);\n        this.conversation.group = Object.assign(this.conversation.group, group)\n        let res = await db.collection('uni-im-group')\n          .doc(this.conversation.group_id)\n          .update(group)\n        // console.log('change group info', res.result.updated,this.conversation);\n      },\n\t\t\tasync setGroupNotice(){\n\t\t\t\tif (uniIm.isWidescreen){\n\t\t\t\t\tthis.$refs['popup-notice-list'].open()\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.$refs['noticeList'].load({\n\t\t\t\t\t\t\tgroup_id:this.conversation.group_id\n\t\t\t\t\t\t})\n\t\t\t\t\t},0)\n\t\t\t\t} else {\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl: '/uni_modules/uni-im/pages/group/notice/list?group_id=' + this.conversation.group_id,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n      async setAvatar() {\n        if (!this.isAdmin) return\n        const crop = {\n          quality: 100,\n          width: 600,\n          height: 600,\n          resize: true\n        };\n        uni.chooseImage({\n          count: 1,\n          crop,\n          success: async (res) => {\n            let tempFile = res.tempFiles[0],\n              avatar_file = {\n                // #ifdef H5\n                extname: tempFile.name.split('.')[tempFile.name.split('.').length - 1],\n                // #endif\n                // #ifndef H5\n                extname: tempFile.path.split('.')[tempFile.path.split('.').length - 1]\n                // #endif\n              },\n              filePath = res.tempFilePaths[0]\n            // #ifndef APP-PLUS\n            //非app端用前端组件剪裁头像，app端用内置的原生裁剪\n            let isPC = false\n            // #ifdef H5\n            isPC = !['ios', 'android'].includes(uni.getSystemInfoSync().platform)\n            // #endif\n            if (!isPC) {\n              filePath = await new Promise((callback) => {\n                uni.navigateTo({\n                  url: '/uni_modules/uni-id-pages/pages/users/cropImage/cropImage?path=' +\n                    filePath + `&options=${JSON.stringify(crop)}`,\n                  animationType: \"fade-in\",\n                  events: {\n                    success: url => {\n                      callback(url)\n                    }\n                  },\n                  complete(e) {\n                    // console.log(e);\n                  }\n                });\n              })\n            }\n            // #endif\n            // console.log(this.users);\n            let cloudPath = this.currentUid + '' + Date.now()\n            avatar_file.name = cloudPath\n            uni.showLoading({\n              title: \"更新中\",\n              mask: true\n            });\n            let {\n              fileID\n            } = await uniCloud.uploadFile({\n              filePath,\n              cloudPath,\n              fileType: \"image\"\n            });\n            // console.log(result)\n            avatar_file.url = fileID\n            // console.log({avatar_file});\n            uni.hideLoading()\n            this.updateGroupInfo({\n              avatar_file\n            })\n          }\n        })\n      },\n      // #ifdef H5\n      share() {\n        // 获取当前域名\n        // const data = location.origin + \"/#/?joinGroup=\" + this.conversation.group._id\n        // uni.setClipboardData({\n        //   data,\n        //   showToast: false,\n        //   success: () => {\n        //     uni.showToast({\n        //       title: \"已成功复制分享链接\",\n        //       duration: 2000,\n        //       icon: 'none'\n        //     });\n        //   }\n        // })\n        if(uniIm.isWidescreen){\n          this.$refs['popup-qr-code'].open()\n          setTimeout(() => {\n            this.$refs['popup-qr-code-page'].load({\"conversation_id\":this.conversation.id})\n          },0)\n        }else{\n          uni.navigateTo({\n          \turl: '/uni_modules/uni-im/pages/group/qrCode?conversation_id=' + this.conversation.id,\n          \tcomplete: (e) => {\n          \t\tconsole.log(e);\n          \t}\n          });\n        }\n      },\n      // #endif\n      joinGroup() {\n        db.collection('uni-im-group-join').add({\n          \"group_id\": this.conversation.group_id,\n          \"message\": ''\n        }).then((res) => {\n          // console.log(\"res: \", res);\n          uni.showToast({\n            icon: 'none',\n            title: '已申请'\n          })\n        })\n      },\n      setMuteAllMembers(e) {\n        this.conversation.group.member.dataList.forEach(member => {\n          member.mute_type += (e.value ? 1 : -1)\n        })\n        this.updateGroupInfo({\n          \"mute_all_members\": e.value\n        })\n      },\n      changeConversationMute(e) {\n        this.conversation.changeMute()\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n  @import \"@/uni_modules/uni-im/common/baseStyle.scss\";\n  page,\n  .group-info-box {\n    width: 100%;\n    height: 100%;\n    background-color: #f5f5f5;\n    .logo {\n      width: 50px;\n      height: 50px;\n    }\n    \n    .exitGroup {\n      margin: 10px 0;\n      background-color: #FFFFFF;\n      padding: 6px 0;\n      color: #e64141;\n      border-radius: 0;\n      font-size: 16px;\n      text-align: center;\n      padding: 15px 0;\n      /* #ifdef H5 */\n      cursor: pointer;\n      /* #endif */\n    }\n    \n    .exitGroup::after {\n      display: none;\n    }\n    \n    .group-info-text {\n      color: #666;\n      font-size: 14px;\n      max-width: 560rpx;\n      text-align: left;\n      word-break: break-all;\n    }\n    \n    .join_option {\n      color: #666;\n      font-size: 14px;\n    }\n    \n    .group-QRCode {\n      border-radius: 20px;\n      height: auto;\n      padding: 15px;\n      padding-top: 55px;\n    }\n\t\t\n\t\t/* #ifdef H5 */\n\t\t.notice-list {\n\t\t\theight: 80vh;\n\t\t\twidth: 800px;\n\t\t\tborder-radius: 10px;\n\t\t\tbackground-color: #fff;\n\t\t\toverflow: hidden;\n\t\t}\n\t\t/* #endif */\n  }\n</style>","import MiniProgramPage from '/Users/orange/aicode/langbot/web_client/langbot-im-uniapp/uni_modules/uni-im/pages/group/info.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","uniIm","uni"],"mappings":"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"}