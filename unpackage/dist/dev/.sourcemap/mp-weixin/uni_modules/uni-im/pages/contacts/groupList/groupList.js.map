{"version":3,"file":"groupList.js","sources":["uni_modules/uni-im/pages/contacts/groupList/groupList.vue","uni_modules/uni-im/pages/contacts/groupList/groupList.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"contacts-groupList\">\n\t\t<uni-search-bar placeholder=\"搜索群号/群名称\" :radius=\"100\" bgColor=\"#eeeeee\" v-model=\"keyword\" \n\t\t\t@cancel=\"doClear\"\n\t\t\t@clear=\"doClear\"\n\t\t></uni-search-bar>\n\t\t<view class=\"uni-list\">\n\t\t\t<uni-im-info-card v-for=\"(item,index) in groupList\" :key=\"index\" \n\t\t\t\t@click=\"toChat(item._id)\" link\n\t\t\t\t:title=\"item?.name\"\n\t\t\t\t:avatar=\"item?.avatar_file?.url || '/uni_modules/uni-im/static/avatarUrl.png'\">\n\t\t\t</uni-im-info-card>\n      <uni-im-load-state class=\"uni-im-load-state\" :status=\"groupHasMore?'loading':'noMore'\"></uni-im-load-state>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport uniIm from '@/uni_modules/uni-im/sdk/index.js';\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tkeyword: '',\n\t\t\t\tgroupData:false\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\t//是否为pc宽屏（width>960px）\n\t\t\tisWidescreen(){\n\t\t\t\treturn uniIm.isWidescreen\n\t\t\t},\n\t\t\tgroupList() {\n\t\t\t\tconst groupList = uniIm.group.dataList\n\t\t\t\tif(this.keyword){\n\t\t\t\t\treturn groupList.filter(item=>{\n\t\t\t\t\t  return item.name.includes(this.keyword) || item._id.includes(this.keyword)\n\t\t\t\t\t})\n\t\t\t\t}else{\n\t\t\t\t\treturn groupList\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroupHasMore(){\n\t\t\t\treturn uniIm.group.hasMore\n\t\t\t}\n\t\t},\n    mounted() {\n      uni.createIntersectionObserver(this, { observeAll: true })\n        .relativeTo('body', {})\n        .observe('.uni-im-load-state', (res) => {\n          if (res.intersectionRatio > 0) {\n            uniIm.group.loadMore()\n          }\n        })\n    },\n    async onLoad(options) {\n    \tthis.setParam(options)\n    },\n\t\tmethods: {\n      setParam(param = {}){\n        if(param.group_id){\n          this.keyword = param.group_id\n        }\n      },\n\t\t\tdoClear(){\n\t\t\t\tthis.keyword = ''\n\t\t\t},\n\t\t\ttoChat(group_id) {\n\t\t\t\tlet conversation_id = 'group_' + group_id\n        uniIm.toChat({conversation_id})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n@import \"@/uni_modules/uni-im/common/baseStyle.scss\";\n.contacts-groupList {\n  /* #ifdef H5 */\n  \t@media screen and (min-device-width:960px){\n      .uni-list {\n        height: calc(100vh - 165px);\n        overflow: auto;\n      }\n  \t}\n  /* #endif */\n}\n</style>\n","import MiniProgramPage from '/Users/orange/aicode/langbot/web_client/langbot-im-uniapp/uni_modules/uni-im/pages/contacts/groupList/groupList.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniIm","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAmBC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,WAAU;AAAA,IACX;AAAA,EACA;AAAA,EACD,UAAU;AAAA;AAAA,IAET,eAAc;AACb,aAAOA,4BAAK,MAAC;AAAA,IACb;AAAA,IACD,YAAY;AACX,YAAM,YAAYA,kCAAM,MAAM;AAC9B,UAAG,KAAK,SAAQ;AACf,eAAO,UAAU,OAAO,UAAM;AAC5B,iBAAO,KAAK,KAAK,SAAS,KAAK,OAAO,KAAK,KAAK,IAAI,SAAS,KAAK,OAAO;AAAA,SAC1E;AAAA,aACG;AACJ,eAAO;AAAA,MACR;AAAA,IACA;AAAA,IACD,eAAc;AACb,aAAOA,4BAAAA,MAAM,MAAM;AAAA,IACpB;AAAA,EACA;AAAA,EACC,UAAU;AACRC,kBAAAA,MAAI,2BAA2B,MAAM,EAAE,YAAY,KAAG,CAAG,EACtD,WAAW,QAAQ,EAAE,EACrB,QAAQ,sBAAsB,CAAC,QAAQ;AACtC,UAAI,IAAI,oBAAoB,GAAG;AAC7BD,oCAAK,MAAC,MAAM,SAAS;AAAA,MACvB;AAAA,KACD;AAAA,EACJ;AAAA,EACK,OAAO,SAAS;AAAA;AACrB,WAAK,SAAS,OAAO;AAAA,IACrB;AAAA;AAAA,EACH,SAAS;AAAA,IACL,SAAS,QAAQ,IAAG;AAClB,UAAG,MAAM,UAAS;AAChB,aAAK,UAAU,MAAM;AAAA,MACvB;AAAA,IACD;AAAA,IACJ,UAAS;AACR,WAAK,UAAU;AAAA,IACf;AAAA,IACD,OAAO,UAAU;AAChB,UAAI,kBAAkB,WAAW;AAC7BA,wCAAM,OAAO,EAAC,gBAAe,CAAC;AAAA,IACnC;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtED,GAAG,WAAW,eAAe;"}