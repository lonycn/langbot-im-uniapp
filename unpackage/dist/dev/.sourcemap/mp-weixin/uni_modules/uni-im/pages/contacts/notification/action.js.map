{"version":3,"file":"action.js","sources":["uni_modules/uni-im/pages/contacts/notification/action.js"],"sourcesContent":["const db = uniCloud.database();\nexport default async function({\r\n\tsubType,\r\n\tconfirm,\r\n\tcancel,\r\n\titem\r\n},callback) {\r\n\tconsole.log({\r\n\t\tsubType,\r\n\t\tconfirm,\r\n\t\tcancel,\r\n\t\titem\r\n\t})\r\n\tswitch (subType) {\r\n\t\tcase 'uni-im-friend-invite':\r\n\t\t\tuni.showLoading({\n\t\t\t\tmask:false\n\t\t\t})\n\t\t\treturn db.collection(\"uni-im-friend-invite\")\n\t\t\t\t\t.doc(item.payload.data._id)\n\t\t\t\t\t.update({\n\t\t\t\t\t\tstate:confirm?100:-100\n\t\t\t\t\t})\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\tcallback()\n\t\t\t\t\t}).catch((err) => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\tcontent: err.message || '请求服务失败',\n\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t})\n\t\t\t\t\t})\r\n\t\t\tbreak;\n\t\tcase 'uni-im-group-join-request':\n\t\t\tuni.showLoading({\n\t\t\t\tmask:false\n\t\t\t})\n\t\t\tlet res = await db.collection('uni-im-group-join')\n\t\t\t\t\t\t\t.where({\n\t\t\t\t\t\t\t\t_id:item.payload.data.doc_id\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.update({\n\t\t\t\t\t\t\t\tstate:confirm?100:-100\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t\tcallback()\n\t\t\t\t\t\t\t}).catch((err) => {\n\t\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\tcontent: err.message || '请求服务失败',\n\t\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n              .finally(() => {\n                uni.hideLoading()\n              })\n\t\t\tbreak;\r\n\t\tdefault:\n\t\t\tconsole.log({subType})\r\n\t\t\tbreak;\r\n\t}\r\n}\n"],"names":["uniCloud","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,KAAKA,cAAAA,GAAS;AACL,SAAA,OAAe,IAK5B,IAAU;AAAA,6CALkB;AAAA,IAC7B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD,GAAE,UAAU;AACXC,wBAAA,MAAA,OAAA,iEAAY;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAE;AACD,YAAQ,SAAO;AAAA,MACd,KAAK;AACJA,sBAAAA,MAAI,YAAY;AAAA,UACf,MAAK;AAAA,QACT,CAAI;AACD,eAAO,GAAG,WAAW,sBAAsB,EACxC,IAAI,KAAK,QAAQ,KAAK,GAAG,EACzB,OAAO;AAAA,UACP,OAAM,UAAQ,MAAI;AAAA,QACxB,CAAM,EACA,KAAK,CAAC,QAAQ;AACdA,wBAAAA,MAAI,YAAa;AACjB,mBAAU;AAAA,QAChB,CAAM,EAAE,MAAM,CAAC,QAAQ;AACjBA,wBAAAA,qFAAY,GAAG;AACfA,wBAAAA,MAAI,UAAU;AAAA,YACb,SAAS,IAAI,WAAW;AAAA,YACxB,YAAY;AAAA,UACnB,CAAO;AAAA,QACP,CAAM;AAAA,MAEJ,KAAK;AACJA,sBAAAA,MAAI,YAAY;AAAA,UACf,MAAK;AAAA,QACT,CAAI;AACS,cAAM,GAAG,WAAW,mBAAmB,EAC5C,MAAM;AAAA,UACN,KAAI,KAAK,QAAQ,KAAK;AAAA,QAC9B,CAAQ,EACA,OAAO;AAAA,UACP,OAAM,UAAQ,MAAI;AAAA,QAC1B,CAAQ,EACA,KAAK,CAAC,QAAQ;AACd,mBAAU;AAAA,QAClB,CAAQ,EAAE,MAAM,CAAC,QAAQ;AACjBA,wBAAAA,MAAA,MAAA,OAAA,kEAAY,GAAG;AACfA,wBAAAA,MAAI,UAAU;AAAA,YACb,SAAS,IAAI,WAAW;AAAA,YACxB,YAAY;AAAA,UACrB,CAAS;AAAA,QACT,CAAQ,EACO,QAAQ,MAAM;AACbA,wBAAAA,MAAI,YAAa;AAAA,QACjC,CAAe;AACZ;AAAA,MACD;AACCA,sBAAAA,MAAY,MAAA,OAAA,kEAAA,EAAC,QAAO,CAAC;AACrB;AAAA,IACD;AAAA,EACF;AAAA;;"}