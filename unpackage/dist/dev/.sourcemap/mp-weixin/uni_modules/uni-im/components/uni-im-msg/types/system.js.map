{"version":3,"file":"system.js","sources":["uni_modules/uni-im/components/uni-im-msg/types/system.vue","/Users/orange/aicode/langbot/web_client/langbot-im-uniapp/uni_modules/uni-im/components/uni-im-msg/types/system.vue?type=component"],"sourcesContent":["<template>\n  <view class=\"system-msg-box\">\n    <template v-if=\"content\">\n\t\t\t<group-notice v-if=\"msg.action === 'setUnreadGroupNoticeId'\" :msg=\"msg\"></group-notice>\n      <text v-else class=\"system-msg\">{{friendlyTime}} {{content}}</text>\n    </template>\n  </view>\n</template>\n\n<script>\n  import uniIm from '@/uni_modules/uni-im/sdk/index.js';\n\timport groupNotice from './group-notice.vue'\n  export default {\n\t\tcomponents: {\n\t\t\tgroupNotice\n\t\t},\n    data() {\n      return {\n        create_time:0\n      }\n    },\n    props: {\n      msg: {\n        type: Object,\n        default () {\n          return {}\n        }\n      },\n    },\n    computed: {\n      friendlyTime() {\n        return uniIm.utils.toFriendlyTime(this.create_time || this.msg.create_time || this.msg.client_create_time)\n      },\n      content(){\n        const msg = this.msg\n        if(msg.action.indexOf(\"update-group-info-\") === 0){\n          const key = Object.keys(msg.body.updateData)[0]\n          const value = msg.body.updateData[key];\n          if (key ==  \"notification\"){\n            this.create_time = value.create_time\n            return value.content\n          }else if(key ==  \"avatar_file\"){\n            return \"群聊头像已更新\"// 已在 msg-list 组件隐藏此类型消息\n          }\n          // mute_all_members \n          else if(key ==  \"mute_all_members\"){\n            return value ? \"已开启“全员禁言”\" : \"已关闭“全员禁言”\"\n          } else{\n            return {\n              \"name\":\" 群聊名称\",\n              \"introduction\":\"群简介\"\n            }[key] + \"已更新为：\" + value\n          }\n        }else if( [\"join-group\",\"group-exit\",\"group-expel\"].includes(msg.action) ){\n          const nicknameList = []\n          msg.body.user_id_list.forEach(async (user_id) => {\n            const nickname = uniIm.users.getNickname(user_id)\n            // console.log(nickname)\n            nicknameList.push(nickname)\n          })\n          let actionName = {\n            \"join-group\":\"加入群聊\",\n            \"group-exit\":\"退出群聊\",\n            \"group-expel\":\"被踢出群聊\"\n          }[msg.action];\n          return nicknameList.join(' , ') + actionName\n        }else if(msg.action === \"group-dissolved\"){\n          return '此群聊已被解散'\n        }else if(msg.action === \"set-group-admin\"){\n          const {user_id,addRole,delRole} = msg.body\n          const nickname = uniIm.users.getNickname(user_id)\n          // console.log(nickname)\n          return `已将\"${nickname}\"${addRole.includes(\"admin\") ? \"添加为群管理员\" : \"从群管理员中移除\"}`\n        }else{\n          return msg.body\n        }\n      }\n    },\n    async mounted() {}\n  }\n</script>\n\n<style lang=\"scss\">\n  .system-msg-box{\n    align-items: center;\n\t\t// 如果是 pc 端\n\t\t// #ifdef H5\n\t\t@media screen and (min-device-width:960px){\n\t\t    max-width: 550px!important;\n\t\t    word-break: break-all;\n\t\t    margin: 0 auto;\n\t\t}\n\t\t// #endif\n\t\t.system-msg {\n\t\t  background-color: #f2f2f2;\n\t\t  color: #9d9e9d;\n\t\t  font-size: 12px;\n\t\t  line-height: 30px;\n\t\t  padding: 0 15rpx;\n\t\t  border-radius: 8px;\n\t\t  margin: 0 2em;\n\t\t}\n  }\n</style>","import Component from '/Users/orange/aicode/langbot/web_client/langbot-im-uniapp/uni_modules/uni-im/components/uni-im-msg/types/system.vue'\nwx.createComponent(Component)"],"names":["uniIm"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAWC,MAAK,cAAe,MAAW;AAC9B,MAAK,YAAU;AAAA,EACf,YAAY;AAAA,IACX;AAAA,EACA;AAAA,EACC,OAAO;AACL,WAAO;AAAA,MACL,aAAY;AAAA,IACd;AAAA,EACD;AAAA,EACD,OAAO;AAAA,IACL,KAAK;AAAA,MACH,MAAM;AAAA,MACN,UAAW;AACT,eAAO,CAAC;AAAA,MACV;AAAA,IACD;AAAA,EACF;AAAA,EACD,UAAU;AAAA,IACR,eAAe;AACb,aAAOA,kCAAM,MAAM,eAAe,KAAK,eAAe,KAAK,IAAI,eAAe,KAAK,IAAI,kBAAkB;AAAA,IAC1G;AAAA,IACD,UAAS;AACP,YAAM,MAAM,KAAK;AACjB,UAAG,IAAI,OAAO,QAAQ,oBAAoB,MAAM,GAAE;AAChD,cAAM,MAAM,OAAO,KAAK,IAAI,KAAK,UAAU,EAAE,CAAC;AAC9C,cAAM,QAAQ,IAAI,KAAK,WAAW,GAAG;AACrC,YAAI,OAAQ,gBAAe;AACzB,eAAK,cAAc,MAAM;AACzB,iBAAO,MAAM;AAAA,mBACN,OAAQ,eAAc;AAC7B,iBAAO;AAAA,QACT,WAEQ,OAAQ,oBAAmB;AACjC,iBAAO,QAAQ,cAAc;AAAA,eACzB;AACJ,iBAAO;AAAA,YACL,QAAO;AAAA,YACP,gBAAe;AAAA,UACjB,EAAE,GAAG,IAAI,UAAU;AAAA,QACrB;AAAA,MACF,WAAU,CAAC,cAAa,cAAa,aAAa,EAAE,SAAS,IAAI,MAAM,GAAG;AACxE,cAAM,eAAe,CAAC;AACtB,YAAI,KAAK,aAAa,QAAQ,CAAO,YAAY;AAC/C,gBAAM,WAAWA,4BAAK,MAAC,MAAM,YAAY,OAAO;AAEhD,uBAAa,KAAK,QAAQ;AAAA,UAC3B;AACD,YAAI,aAAa;AAAA,UACf,cAAa;AAAA,UACb,cAAa;AAAA,UACb,eAAc;AAAA,UACd,IAAI,MAAM;AACZ,eAAO,aAAa,KAAK,KAAK,IAAI;AAAA,MACpC,WAAS,IAAI,WAAW,mBAAkB;AACxC,eAAO;AAAA,MACT,WAAS,IAAI,WAAW,mBAAkB;AACxC,cAAM,EAAC,SAAQ,SAAQ,QAAO,IAAI,IAAI;AACtC,cAAM,WAAWA,4BAAK,MAAC,MAAM,YAAY,OAAO;AAEhD,eAAO,MAAM,QAAQ,IAAI,QAAQ,SAAS,OAAO,IAAI,YAAY,UAAU;AAAA,aACxE;AACH,eAAO,IAAI;AAAA,MACb;AAAA,IACF;AAAA,EACD;AAAA,EACK,UAAU;AAAA;AAAA,IAAC;AAAA;AACnB;;;;;;;;;;;;;;;;;;;;AC9EF,GAAG,gBAAgB,SAAS;"}