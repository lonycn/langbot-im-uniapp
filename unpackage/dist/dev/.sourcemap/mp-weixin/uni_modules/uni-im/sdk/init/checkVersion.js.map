{"version":3,"file":"checkVersion.js","sources":["uni_modules/uni-im/sdk/init/checkVersion.js"],"sourcesContent":["export default (version)=>{\n  // 根据版本号决定是否清空过期的 storage 数据\n  // #ifndef APP\n  // 清理旧版本下的storage避免脏数据引发问题\n  const lastVersion = uni.getStorageSync('uni-im-storage-version')\n  if (lastVersion != version) {\n    // uni.clearStorage()\n    const storageKeys = uni.getStorageInfoSync().keys\n    storageKeys.forEach(key => {\n      if (key.indexOf(\"uni-im\") === 0) {\n        // console.error('key', key);\n        uni.removeStorageSync(key)\n      }\n    })\n    uni.setStorageSync('uni-im-storage-version', version)\n    // console.log('clear history storage success');\n  }\n  // #endif\n}"],"names":["uni"],"mappings":";;AAAA,MAAe,eAAA,CAAC,YAAU;AAIxB,QAAM,cAAcA,cAAAA,MAAI,eAAe,wBAAwB;AAC/D,MAAI,eAAe,SAAS;AAE1B,UAAM,cAAcA,cAAAA,MAAI,mBAAkB,EAAG;AAC7C,gBAAY,QAAQ,SAAO;AACzB,UAAI,IAAI,QAAQ,QAAQ,MAAM,GAAG;AAE/BA,sBAAG,MAAC,kBAAkB,GAAG;AAAA,MAC1B;AAAA,IACP,CAAK;AACDA,wBAAI,eAAe,0BAA0B,OAAO;AAAA,EAErD;AAEH;;"}